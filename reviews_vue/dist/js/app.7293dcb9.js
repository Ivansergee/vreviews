(function(){var s={3673:function(s,e,t){"use strict";var a=t(4220),o=t(9812),i=t(5893);const l={id:"wrapper"},n={class:"navbar is-dark"},r={class:"navbar-brand"},c=(0,o._)("strong",null,"VReviews",-1),d=(0,o._)("span",{"aria-hidden":"true"},null,-1),u=(0,o._)("span",{"aria-hidden":"true"},null,-1),m=(0,o._)("span",{"aria-hidden":"true"},null,-1),_=[d,u,m],p={class:"navbar-start"},g=(0,o.Uk)("Жидкости"),v=(0,o.Uk)("Одноразки"),h=(0,o.Uk)("Добавить"),w={key:0,class:"navbar-end"},k=(0,o.Uk)(" Администрирование "),b={class:"icon-text"},f=(0,o._)("span",{class:"icon"},[(0,o._)("i",{class:"fa-solid fa-user-large fa-lg"})],-1),y=(0,o._)("span",{class:"logout"},"Выход",-1),j=[y],C={key:1,class:"navbar-end"},D={class:"navbar-item"},$={class:"buttons"},I={key:0,class:"navbar is-dark"},U=(0,o.uE)('<div class="navbar-item is-flex-grow-1"><div class="field has-addons is-flex-grow-1 mx-6"><p class="control is-flex-grow-1"><input class="input" type="text" placeholder="Название продукта, бренда или производителя"></p><p class="control is-flex-grow-0"><button class="button">Найти</button></p></div></div>',1),z=[U],x=(0,o._)("div",{class:"lds-dual-ring"},null,-1),L=[x],R={class:"modal-content"},P={class:"modal-content"},S={class:"modal-content"},q={class:"box"},O={class:"level"},V=(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Сбросить пароль")],-1),T={class:"level-right"},H={class:"field"},M=(0,o._)("label",null,"Email",-1),Y={class:"control"},A=(0,o._)("p",{class:"help"}," Введите email, указанный при регистрации. На него будет отправлена ссылка для сброса пароля. ",-1),E=(0,o._)("div",{class:"level"},[(0,o._)("div",{class:"level-left"},[(0,o._)("button",{class:"button is-dark"},"Отправить")])],-1),F={class:"section"},B=(0,o._)("footer",{class:"footer"},[(0,o._)("p",{class:"has-text-centered"},"VReviews 2022")],-1);function Z(s,e,t,d,u,m){const y=(0,o.up)("router-link"),U=(0,o.up)("LogIn"),x=(0,o.up)("SignUp"),Z=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("nav",n,[(0,o._)("div",r,[(0,o.Wm)(y,{class:"navbar-item",to:"/"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o._)("a",{class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-menu",onClick:e[0]||(e[0]=s=>u.showMobileMenu=!u.showMobileMenu)},_)]),(0,o._)("div",{class:(0,i.C_)(["navbar-menu",{"is-active":u.showMobileMenu}]),id:"navbar-menu"},[(0,o._)("div",p,[(0,o.Wm)(y,{class:"navbar-item",to:{name:"liquids-list"}},{default:(0,o.w5)((()=>[g])),_:1}),(0,o.Wm)(y,{class:"navbar-item",to:"/"},{default:(0,o.w5)((()=>[v])),_:1}),(0,o.Wm)(y,{class:"navbar-item",to:{name:"add-liquid"}},{default:(0,o.w5)((()=>[h])),_:1}),(0,o._)("a",{class:(0,i.C_)(["navbar-item",{active:u.showSearch}]),onClick:e[1]||(e[1]=s=>u.showSearch=!u.showSearch)},[(0,o._)("i",{class:(0,i.C_)(["fa-solid fa-magnifying-glass fa-lg",{active:u.showSearch}])},null,2)],2)]),s.$store.state.isAuthenticated?((0,o.wg)(),(0,o.iD)("div",w,[s.$store.state.isAdmin?((0,o.wg)(),(0,o.j4)(y,{key:0,class:"navbar-item",to:{name:"admin"}},{default:(0,o.w5)((()=>[k])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(y,{class:"navbar-item profile",to:{name:"profile"}},{default:(0,o.w5)((()=>[(0,o._)("span",b,[f,(0,o._)("span",null,(0,i.zw)(s.$store.state.username),1)])])),_:1}),(0,o._)("a",{class:"navbar-item",onClick:e[2]||(e[2]=s=>m.logout())},j)])):((0,o.wg)(),(0,o.iD)("div",C,[(0,o._)("div",D,[(0,o._)("div",$,[(0,o._)("a",{class:"button is-blue",onClick:e[3]||(e[3]=s=>u.showLogIn=!0)},"Вход"),(0,o._)("a",{class:"button is-success",onClick:e[4]||(e[4]=s=>u.showSignUp=!0)},"Регистрация")])])]))],2)]),u.showSearch?((0,o.wg)(),(0,o.iD)("nav",I,z)):(0,o.kq)("",!0),(0,o._)("div",{class:(0,i.C_)(["is-loading-bar has-text-centered",{"is-loading":s.$store.state.isLoading}])},L,2),(0,o._)("div",{class:(0,i.C_)(["modal",{"is-active":u.showLogIn}])},[(0,o._)("div",{class:"modal-background",onClick:e[5]||(e[5]=s=>u.showLogIn=!1)}),(0,o._)("div",R,[(0,o.Wm)(U,{onLogged:e[6]||(e[6]=s=>u.showLogIn=!1),onShowRegister:e[7]||(e[7]=s=>u.showSignUp=!0),onShowResetPassword:e[8]||(e[8]=s=>u.showResetPassword=!0)})])],2),(0,o._)("div",{class:(0,i.C_)(["modal",{"is-active":u.showSignUp}])},[(0,o._)("div",{class:"modal-background",onClick:e[9]||(e[9]=s=>u.showSignUp=!1)}),(0,o._)("div",P,[(0,o.Wm)(x,{onSigned:e[10]||(e[10]=s=>u.showSignUp=!1),onShowLogin:e[11]||(e[11]=s=>u.showLogIn=!0)})])],2),(0,o._)("div",{class:(0,i.C_)(["modal",{"is-active":u.showResetPassword}])},[(0,o._)("div",{class:"modal-background",onClick:e[12]||(e[12]=s=>u.showResetPassword=!1)}),(0,o._)("div",S,[(0,o._)("div",q,[(0,o._)("div",O,[V,(0,o._)("div",T,[(0,o._)("button",{class:"delete is-medium","aria-label":"close",onClick:e[13]||(e[13]=s=>u.showResetPassword=!1)})])]),(0,o._)("form",{onSubmit:e[15]||(e[15]=(0,a.iM)((s=>m.resetPassword()),["prevent"]))},[(0,o._)("div",H,[M,(0,o._)("div",Y,[(0,o.wy)((0,o._)("input",{type:"email",class:"input","onUpdate:modelValue":e[14]||(e[14]=s=>u.email=s)},null,512),[[a.nr,u.email]])]),A]),E],32)])])],2),(0,o._)("main",F,[(0,o.Wm)(Z)]),B])}var K=t(6211),W=t.n(K),N=t(3573);const J=s=>((0,o.dD)("data-v-55a9e2e4"),s=s(),(0,o.Cn)(),s),G={class:"box"},Q={class:"level"},X=J((()=>(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Вход")],-1))),ss={class:"level-right"},es={class:"field"},ts=J((()=>(0,o._)("label",null,"Имя пользователя",-1))),as={class:"control"},os={class:"field"},is=J((()=>(0,o._)("label",null,"Пароль",-1))),ls={class:"control"},ns={key:0,class:"notification is-danger"},rs={class:"level"},cs={class:"level-left"},ds={class:"level"},us={class:"level-left"},ms={class:"level-right"};function _s(s,e,t,l,n,r){return(0,o.wg)(),(0,o.iD)("div",G,[(0,o._)("div",Q,[X,(0,o._)("div",ss,[(0,o._)("button",{class:"delete is-medium","aria-label":"close",onClick:e[0]||(e[0]=s=>r.close())})])]),(0,o._)("form",{onSubmit:e[5]||(e[5]=(0,a.iM)(((...s)=>r.submitForm&&r.submitForm(...s)),["prevent"]))},[(0,o._)("div",es,[ts,(0,o._)("div",as,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=s=>n.username=s)},null,512),[[a.nr,n.username]])])]),(0,o._)("div",os,[is,(0,o._)("div",ls,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=s=>n.password=s)},null,512),[[a.nr,n.password]])])]),n.errors.length?((0,o.wg)(),(0,o.iD)("div",ns,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.errors,(s=>((0,o.wg)(),(0,o.iD)("p",{key:s},(0,i.zw)(s),1)))),128))])):(0,o.kq)("",!0),(0,o._)("div",rs,[(0,o._)("div",cs,[(0,o._)("a",{onClick:e[3]||(e[3]=e=>{r.close(),s.$emit("showResetPassword")})},"Не помню пароль")])]),(0,o._)("div",ds,[(0,o._)("div",us,[(0,o._)("button",{class:(0,i.C_)(["button is-dark",{"is-loading":n.isLoading}])},"Войти",2)]),(0,o._)("div",ms,[(0,o._)("a",{onClick:e[4]||(e[4]=e=>{r.close(),s.$emit("showRegister")})},"Создать аккаунт")])])],32)])}var ps={name:"Log In",emits:["logged","showRegister"],data(){return{username:"",password:"",errors:[],isLoading:!1}},methods:{async submitForm(){if(this.errors=[],""===this.username&&this.errors.push("Заполните имя пользователя"),""===this.password&&this.errors.push("Введите пароль"),!this.errors.length){const s={username:this.username,password:this.password};this.isLoading=!0,await W().post("token/login/",s).then((s=>{const e=s.data.auth_token;this.$store.commit("setToken",e),this.$store.commit("setUsername",this.username),W().defaults.headers.common.Authorization="Token "+e,localStorage.setItem("token",e),localStorage.setItem("username",this.username),this.close()})).catch((s=>{if(s.response){for(const e in s.response.data)this.errors.push(`${e}: ${s.response.data[e]}`);console.log(JSON.stringify(s.response.data))}else s.message&&(this.errors.push("Что-то пошло не так. Попробуйте ещё раз."),console.log(s.message))})),this.isLoading=!1,await W().get("users/me/").then((s=>{this.$store.commit("setIsAdmin",s.data.is_staff),localStorage.setItem("isAdmin",s.data.is_staff)}))}},close(){this.password="",this.username="",this.$emit("logged")}}},gs=t(8998);const vs=(0,gs.Z)(ps,[["render",_s],["__scopeId","data-v-55a9e2e4"]]);var hs=vs;const ws=s=>((0,o.dD)("data-v-0a5ad874"),s=s(),(0,o.Cn)(),s),ks={class:"box"},bs={class:"level"},fs=ws((()=>(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Регистрация")],-1))),ys={class:"level-right"},js={class:"field"},Cs=ws((()=>(0,o._)("label",null,"Имя пользователя",-1))),Ds={class:"control"},$s={class:"field"},Is=ws((()=>(0,o._)("label",null,"Email",-1))),Us={class:"control"},zs={class:"field"},xs=ws((()=>(0,o._)("label",null,"Пароль",-1))),Ls={class:"control"},Rs={class:"field"},Ps=ws((()=>(0,o._)("label",null,"Подтвердите пароль",-1))),Ss={class:"control"},qs={key:0,class:"notification is-danger"},Os={class:"level"},Vs={class:"level-left"},Ts={class:"level-right"},Hs=ws((()=>(0,o._)("span",null,"Уже зарегистрированы?  ",-1)));function Ms(s,e,t,l,n,r){return(0,o.wg)(),(0,o.iD)("div",ks,[(0,o._)("div",bs,[fs,(0,o._)("div",ys,[(0,o._)("button",{class:"delete is-medium","aria-label":"close",onClick:e[0]||(e[0]=s=>r.close())})])]),(0,o._)("form",{onSubmit:e[6]||(e[6]=(0,a.iM)(((...s)=>r.submitForm&&r.submitForm(...s)),["prevent"]))},[(0,o._)("div",js,[Cs,(0,o._)("div",Ds,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=s=>n.username=s)},null,512),[[a.nr,n.username]])])]),(0,o._)("div",$s,[Is,(0,o._)("div",Us,[(0,o.wy)((0,o._)("input",{type:"email",class:"input","onUpdate:modelValue":e[2]||(e[2]=s=>n.email=s)},null,512),[[a.nr,n.email]])])]),(0,o._)("div",zs,[xs,(0,o._)("div",Ls,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[3]||(e[3]=s=>n.password1=s)},null,512),[[a.nr,n.password1]])])]),(0,o._)("div",Rs,[Ps,(0,o._)("div",Ss,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[4]||(e[4]=s=>n.password2=s)},null,512),[[a.nr,n.password2]])])]),n.errors.length?((0,o.wg)(),(0,o.iD)("div",qs,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.errors,(s=>((0,o.wg)(),(0,o.iD)("p",{key:s},(0,i.zw)(s),1)))),128))])):(0,o.kq)("",!0),(0,o._)("div",Os,[(0,o._)("div",Vs,[(0,o._)("button",{class:(0,i.C_)(["button is-dark",{"is-loading":n.isLoading}])},"Регистрация",2)]),(0,o._)("div",Ts,[Hs,(0,o._)("a",{onClick:e[5]||(e[5]=e=>{r.close(),s.$emit("showLogin")})},"Войти")])])],32)])}var Ys={name:"Sign Up",emits:["signed","showLogin"],data(){return{username:"",email:"",password1:"",password2:"",errors:[],isLoading:!1}},methods:{submitForm(){if(this.errors=[],""===this.username&&this.errors.push("Заполните имя пользователя"),""===this.email&&this.errors.push("Введите email"),""===this.password1&&this.errors.push("Пароль должен содержать не менее 4 символов"),this.password1!==this.password2&&this.errors.push("Пароли не совпадают"),!this.errors.length){const s={username:this.username,email:this.email,password:this.password1};this.isLoading=!0,W().post("/users/",s).then((()=>{(0,N.toast)({message:"Вы зарегистрированы! Пройдите по ссылке в письме на почте для активации аккаунта.",type:"is-success",dismissible:!0,pauseOnHover:!0,position:"top-center"}),this.close()})).catch((s=>{if(s.response){for(const e in s.response.data)this.errors.push(`${e}: ${s.response.data[e]}`);console.log(JSON.stringify(s.response.data))}else s.message&&(this.errors.push("Что-то пошло не так. Попробуйте ещё раз."),console.log(JSON.stringify(s)))})),this.isLoading=!1}},close(){this.username="",this.email="",this.password1="",this.password2="",this.$emit("signed")}}};const As=(0,gs.Z)(Ys,[["render",Ms],["__scopeId","data-v-0a5ad874"]]);var Es=As,Fs={components:{LogIn:hs,SignUp:Es},data(){return{showMobileMenu:!1,showLogIn:!1,showSignUp:!1,showSearch:!1,showResetPassword:!1,email:""}},beforeCreate(){this.$store.commit("initializeStore");const s=this.$store.state.token;W().defaults.headers.common.Authorization=s?"Token "+s:""},methods:{logout(){W().defaults.headers.common.Authorization="",localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("userid"),localStorage.removeItem("isAdmin"),this.$store.commit("removeToken"),this.$router.push("/")},async resetPassword(){await W().post("users/reset_password/",{email:this.email}).then((()=>{(0,N.toast)({message:"На указанную почту направлена ссылка для сброса пароля.",type:"is-success",dismissible:!0,pauseOnHover:!0,position:"top-center"}),this.email="",this.showResetPassword=!1})).catch((s=>{console.log(s.response.data)}))},showLoginRequired(){(0,N.toast)({message:"Необходимо авторизоваться!",type:"is-danger",dismissible:!0,duration:3e3,pauseOnHover:!0,position:"top-center"})}},mounted(){}};const Bs=(0,gs.Z)(Fs,[["render",Z]]);var Zs=Bs,Ks=t(3065);const Ws={class:"home"};function Ns(s,e,t,a,i,l){return(0,o.wg)(),(0,o.iD)("div",Ws," home ")}var Js={name:"HomeView",components:{}};const Gs=(0,gs.Z)(Js,[["render",Ns]]);var Qs=Gs;const Xs=s=>((0,o.dD)("data-v-4c06facc"),s=s(),(0,o.Cn)(),s),se={key:0,class:"container"},ee={class:"level"},te={class:"level-left"},ae={class:"title level-item"},oe={class:"columns head"},ie={class:"column is-4"},le={class:"image is-1by1"},ne=["src"],re={class:"column is-4"},ce={class:"content"},de=Xs((()=>(0,o._)("strong",null,"Страна:",-1))),ue=Xs((()=>(0,o._)("strong",null,"Производитель:",-1))),me={class:"column is-4"},_e={class:"content"},pe=Xs((()=>(0,o._)("p",{class:"title is-4"},"Средняя оценка:",-1))),ge={class:"tags are-large has-addons"},ve=Xs((()=>(0,o._)("span",{class:"tag"},[(0,o._)("i",{class:"bi bi-star-fill"})],-1))),he={class:"tag is-primary"},we=Xs((()=>(0,o._)("strong",null,"Отзывов:",-1))),ke=Xs((()=>(0,o._)("strong",null,"Оценок:",-1))),be={class:"products"},fe={class:"title"};function ye(s,e,t,a,l,n){const r=(0,o.up)("Product");return l.brand?((0,o.wg)(),(0,o.iD)("div",se,[(0,o._)("div",ee,[(0,o._)("div",te,[(0,o._)("h1",ae,(0,i.zw)(l.brand.name),1)])]),(0,o._)("div",oe,[(0,o._)("div",ie,[(0,o._)("figure",le,[(0,o._)("img",{src:l.brand.get_image},null,8,ne)])]),(0,o._)("div",re,[(0,o._)("div",ce,[(0,o._)("p",null,[de,(0,o.Uk)(" "+(0,i.zw)(l.brand.producer.country),1)]),(0,o._)("p",null,[ue,(0,o.Uk)(" "+(0,i.zw)(l.brand.producer.name),1)]),(0,o._)("p",null,(0,i.zw)(l.brand.description),1)])]),(0,o._)("div",me,[(0,o._)("div",_e,[pe,(0,o._)("div",ge,[ve,(0,o._)("span",he,(0,i.zw)(l.brand.get_avg_score),1)]),(0,o._)("p",null,[we,(0,o.Uk)(" "+(0,i.zw)(l.brand.get_reviews_amount),1)]),(0,o._)("p",null,[ke,(0,o.Uk)(" "+(0,i.zw)(l.brand.get_score_amount),1)])])])]),(0,o._)("div",be,[(0,o._)("p",fe,"Все вкусы "+(0,i.zw)(l.brand.name),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.products,(s=>((0,o.wg)(),(0,o.j4)(r,{key:s.id,name:s.name,image:s.image_url,slug:s.slug,avg_score:s.get_avg_score,flavors:s.flavors,reviews_amount:s.get_reviews_amount,score_amount:s.get_score_amount},null,8,["name","image","slug","avg_score","flavors","reviews_amount","score_amount"])))),128))])])):(0,o.kq)("",!0)}const je=s=>((0,o.dD)("data-v-d3eb5b76"),s=s(),(0,o.Cn)(),s),Ce={class:"columns box is-vcentered my-5"},De={class:"column is-2"},$e={class:"image is-1by1"},Ie=["src"],Ue={class:"column is-3"},ze={class:"title is-5"},xe={class:"column is-2"},Le=je((()=>(0,o._)("i",{class:"bi bi-chat-left-text"},null,-1))),Re=je((()=>(0,o._)("i",{class:"bi bi-star-fill"},null,-1))),Pe={class:"column"},Se={class:"tags"},qe={class:"column"},Oe={class:"tag is-primary is-large"},Ve=je((()=>(0,o._)("i",{class:"bi bi-star-fill"},null,-1)));function Te(s,e,t,a,l,n){const r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",Ce,[(0,o._)("div",De,[(0,o._)("figure",$e,[(0,o._)("img",{src:t.image},null,8,Ie)])]),(0,o._)("div",Ue,[(0,o._)("p",ze,[(0,o.Wm)(r,{to:{name:"product-detail",params:{product_slug:t.slug}}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.name),1)])),_:1},8,["to"])])]),(0,o._)("div",xe,[(0,o._)("span",null,[Le,(0,o.Uk)(" "+(0,i.zw)(t.reviews_amount),1)]),(0,o._)("span",null,[Re,(0,o.Uk)(" "+(0,i.zw)(t.score_amount),1)])]),(0,o._)("div",Pe,[(0,o._)("p",Se,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.flavors,(s=>((0,o.wg)(),(0,o.iD)("span",{class:"tag is-info",key:s.id},(0,i.zw)(s),1)))),128))])]),(0,o._)("div",qe,[(0,o._)("span",Oe,[Ve,(0,o.Uk)(" "+(0,i.zw)(t.avg_score),1)])])])}var He={props:["name","image","slug","reviews_amount","score_amount","flavors","avg_score"]};const Me=(0,gs.Z)(He,[["render",Te],["__scopeId","data-v-d3eb5b76"]]);var Ye=Me,Ae={components:{Product:Ye},data(){return{brand:null,products:[]}},mounted(){this.getBrandData(),this.getProducts()},methods:{async getBrandData(){this.$store.commit("setIsLoading",!0);const s=this.$route.params.brand_slug;await W().get(`/brands/${s}/`).then((s=>{this.brand=s.data})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)},async getProducts(){this.$store.commit("setIsLoading",!0);const s=this.$route.params.brand_slug;await W().get(`/products/?brand=${s}/`).then((s=>{this.products=s.data})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)}}};const Ee=(0,gs.Z)(Ae,[["render",ye],["__scopeId","data-v-4c06facc"]]);var Fe=Ee;const Be={key:0,class:"products"},Ze=(0,o._)("p",{class:"title"},"Топ жидкостей",-1);function Ke(s,e,t,a,i,l){const n=(0,o.up)("Product");return i.products?((0,o.wg)(),(0,o.iD)("div",Be,[Ze,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.products,(s=>((0,o.wg)(),(0,o.j4)(n,{key:s.id,name:s.name,image:s.image_url,slug:s.slug,avg_score:s.avg_score?s.avg_score:"-",flavors:s.flavors,reviews_amount:s.get_reviews_amount,score_amount:s.get_score_amount},null,8,["name","image","slug","avg_score","flavors","reviews_amount","score_amount"])))),128))])):(0,o.kq)("",!0)}var We={components:{Product:Ye},data(){return{products:null}},mounted(){this.getProducts()},methods:{async getProducts(){this.$store.commit("setIsLoading",!0),await W().get("/products/?ordering=-avg_score").then((s=>{this.products=s.data.results})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)}}};const Ne=(0,gs.Z)(We,[["render",Ke]]);var Je=Ne;const Ge=s=>((0,o.dD)("data-v-c6136bc8"),s=s(),(0,o.Cn)(),s),Qe={key:0,class:"container"},Xe={class:"level"},st={class:"level-left"},et={class:"title level-item"},tt={class:"columns"},at={class:"column is-4"},ot={class:"image is-1by1"},it=["src"],lt=Ge((()=>(0,o._)("span",{class:"icon"},[(0,o._)("i",{class:"fa-regular fa-bookmark"})],-1))),nt=Ge((()=>(0,o._)("span",null,"В закладки",-1))),rt=[lt,nt],ct=Ge((()=>(0,o._)("span",{class:"icon"},[(0,o._)("i",{class:"fa-solid fa-bookmark"})],-1))),dt=Ge((()=>(0,o._)("span",null,"Добавлено",-1))),ut=[ct,dt],mt={class:"column is-4"},_t={class:"content"},pt=Ge((()=>(0,o._)("strong",null,"Бренд:",-1))),gt=Ge((()=>(0,o._)("strong",null,"Название:",-1))),vt=Ge((()=>(0,o._)("strong",null,"Страна:",-1))),ht=Ge((()=>(0,o._)("strong",null,"Производитель:",-1))),wt=Ge((()=>(0,o._)("p",null,[(0,o._)("strong",null,"Вкусы:")],-1))),kt={class:"tags"},bt=Ge((()=>(0,o._)("p",null,[(0,o._)("strong",null,"Содержание никотина:")],-1))),ft={class:"tags"},yt={class:"column is-4"},jt={class:"content"},Ct=Ge((()=>(0,o._)("p",{class:"title is-4"},"Оценка:",-1))),Dt={class:"tags are-large has-addons"},$t=Ge((()=>(0,o._)("span",{class:"tag"},[(0,o._)("i",{class:"bi bi-star-fill"})],-1))),It={class:"tag is-primary"},Ut=Ge((()=>(0,o._)("strong",null,"Отзывов: ",-1))),zt=Ge((()=>(0,o._)("strong",null,"Оценок: ",-1))),xt={class:"user-review"},Lt=Ge((()=>(0,o._)("p",{class:"title is-4"},"Ваша оценка",-1))),Rt={key:0},Pt=["onMouseover"],St={class:"tag is-primary"},qt={class:"media"},Ot={class:"media-content"},Vt={class:"field"},Tt={class:"control"},Ht={class:"field"},Mt={class:"control"},Yt={key:1},At=Ge((()=>(0,o._)("strong",null,"Оценка: ",-1))),Et=Ge((()=>(0,o._)("strong",null,"Отзыв: ",-1))),Ft=Ge((()=>(0,o._)("br",null,null,-1))),Bt={class:"mt-5"},Zt={class:"reviews"},Kt=Ge((()=>(0,o._)("p",{class:"title is-3"},"Отзывы",-1)));function Wt(s,e,t,l,n,r){const c=(0,o.up)("router-link"),d=(0,o.up)("Review");return n.product?((0,o.wg)(),(0,o.iD)("div",Qe,[(0,o._)("div",Xe,[(0,o._)("div",st,[(0,o._)("h1",et,(0,i.zw)(n.product.brand.name)+" "+(0,i.zw)(n.product.name),1)])]),(0,o._)("div",tt,[(0,o._)("div",at,[(0,o._)("figure",ot,[(0,o._)("img",{src:n.product.image_url},null,8,it)]),n.product.user_bookmark?((0,o.wg)(),(0,o.iD)("a",{key:1,class:"button mt-3",onClick:e[1]||(e[1]=s=>r.toggleBookmark())},ut)):((0,o.wg)(),(0,o.iD)("a",{key:0,class:"button mt-3",onClick:e[0]||(e[0]=s=>r.toggleBookmark())},rt))]),(0,o._)("div",mt,[(0,o._)("div",_t,[(0,o._)("p",null,[pt,(0,o.Wm)(c,{to:{name:"brand-list",params:{brand_slug:n.product.brand.slug}}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.product.brand.name),1)])),_:1},8,["to"])]),(0,o._)("p",null,[gt,(0,o.Uk)(" "+(0,i.zw)(n.product.name),1)]),(0,o._)("p",null,[vt,(0,o.Uk)(" "+(0,i.zw)(n.product.brand.producer.country),1)]),(0,o._)("p",null,[ht,(0,o.Uk)(" "+(0,i.zw)(n.product.brand.producer.name),1)]),wt,(0,o._)("p",kt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.product.flavors,(s=>((0,o.wg)(),(0,o.iD)("a",{class:"tag is-info",key:s.id},(0,i.zw)(s),1)))),128))]),bt,(0,o._)("p",ft,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.product.nic_content,(s=>((0,o.wg)(),(0,o.iD)("a",{class:"tag is-warning",key:s.id},(0,i.zw)(s),1)))),128))]),(0,o._)("p",null,(0,i.zw)(n.product.description),1)])]),(0,o._)("div",yt,[(0,o._)("div",jt,[Ct,(0,o._)("div",Dt,[$t,(0,o._)("span",It,(0,i.zw)(n.product.avg_score?n.product.avg_score:"-"),1)]),(0,o._)("p",null,[Ut,(0,o.Uk)((0,i.zw)(n.product.reviews_count),1)]),(0,o._)("p",null,[zt,(0,o.Uk)((0,i.zw)(n.product.score_count),1)])])])]),(0,o._)("section",xt,[Lt,n.user_review?((0,o.wg)(),(0,o.iD)("div",Yt,[(0,o._)("p",null,[At,(0,o.Uk)((0,i.zw)(n.user_score),1)]),(0,o._)("p",null,[Et,Ft,(0,o.Uk)((0,i.zw)(n.user_review),1)]),(0,o._)("div",Bt,[(0,o._)("button",{class:"button is-info mr-2",onClick:e[6]||(e[6]=s=>{n.new_user_review=n.user_review,n.user_review=""})}," Редактировать ")])])):((0,o.wg)(),(0,o.iD)("div",Rt,[(0,o._)("div",{class:"tags has-addons",onMouseleave:e[2]||(e[2]=s=>n.score=n.user_score),onClick:e[3]||(e[3]=s=>r.setScore())},[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(10,(s=>(0,o._)("a",{class:"tag",key:s,onMouseover:e=>n.score=s},[(0,o._)("i",{class:(0,i.C_)(["bi",[n.score>=s?"bi-star-fill":"bi-star"]])},null,2)],40,Pt))),64)),(0,o._)("span",St,(0,i.zw)(n.score),1)],32),(0,o._)("article",qt,[(0,o._)("div",Ot,[(0,o._)("div",Vt,[(0,o._)("p",Tt,[(0,o.wy)((0,o._)("textarea",{class:"textarea",placeholder:"Ваш отзыв...","onUpdate:modelValue":e[4]||(e[4]=s=>n.new_user_review=s)},null,512),[[a.nr,n.new_user_review]])])]),(0,o._)("div",Ht,[(0,o._)("p",Mt,[(0,o._)("button",{class:(0,i.C_)(["button",{"is-loading":n.isLoading}]),onClick:e[5]||(e[5]=s=>r.addReview())},"Отправить",2)])])])])]))]),(0,o._)("section",Zt,[Kt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.reviews,(s=>((0,o.wg)(),(0,o.j4)(d,{key:s.id,id:s.id,author:s.author,score:s.score,text:s.text,created_at:s.created_at,likesCount:s.likes_count,dislikesCount:s.dislikes_count,userReaction:s.user_reaction,comments:s.comments,commentingPostId:n.commentingPostId,onCommenting:r.setCommentingPostId,onCommented:r.getReviews,onRated:r.setRated,onDeleted:r.removeReview},null,8,["id","author","score","text","created_at","likesCount","dislikesCount","userReaction","comments","commentingPostId","onCommenting","onCommented","onRated","onDeleted"])))),128))])])):(0,o.kq)("",!0)}const Nt=s=>((0,o.dD)("data-v-560fd439"),s=s(),(0,o.Cn)(),s),Jt={class:"review"},Gt={class:"media"},Qt=Nt((()=>(0,o._)("figure",{class:"media-left"},[(0,o._)("p",{class:"image is-64x64"},[(0,o._)("img",{src:"http://localhost:8000/media/placeholder.jpg"})])],-1))),Xt={class:"media-content"},sa={class:"content"},ea=(0,o.Uk)(),ta=Nt((()=>(0,o._)("br",null,null,-1))),aa=Nt((()=>(0,o._)("strong",null,"Оценка:",-1))),oa=Nt((()=>(0,o._)("br",null,null,-1))),ia=Nt((()=>(0,o._)("br",null,null,-1))),la=(0,o.Uk)(" · "),na=(0,o.Uk)(" · "),ra=(0,o.Uk)(" · "),ca={class:"media reply-form"},da={key:0,class:"media-content"},ua={class:"field"},ma={class:"control"},_a={class:"field"},pa={class:"control"},ga=Nt((()=>(0,o._)("div",{class:"modal-background"},null,-1))),va={class:"modal-content"},ha={class:"box"},wa=Nt((()=>(0,o._)("p",{class:"mb-5"},"Вы уверены?",-1))),ka={class:"controls"};function ba(s,e,t,l,n,r){const c=(0,o.up)("Comment");return(0,o.wg)(),(0,o.iD)("div",Jt,[(0,o._)("article",Gt,[Qt,(0,o._)("div",Xt,[(0,o._)("div",sa,[(0,o._)("p",null,[(0,o._)("strong",null,(0,i.zw)(t.author),1),ea,(0,o._)("small",null,(0,i.zw)(r.formatTime(t.created_at)),1),ta,aa,(0,o.Uk)(" "+(0,i.zw)(t.score)+" ",1),oa,(0,o.Uk)(" "+(0,i.zw)(t.text)+" ",1),ia,(0,o._)("small",null,[(0,o._)("a",{onClick:e[0]||(e[0]=s=>r.manageReaction(!0))},[(0,o._)("i",{class:(0,i.C_)(["fa-thumbs-up",[!0===t.userReaction?"fa-solid":"fa-regular"]])},null,2)]),(0,o._)("small",null,(0,i.zw)(t.likesCount),1),la,(0,o._)("a",{onClick:e[1]||(e[1]=s=>r.manageReaction(!1))},[(0,o._)("i",{class:(0,i.C_)(["fa-thumbs-down",[!1===t.userReaction?"fa-solid":"fa-regular"]])},null,2)]),(0,o._)("small",null,(0,i.zw)(t.dislikesCount),1),na,(0,o._)("a",{onClick:e[2]||(e[2]=s=>r.toggleReplyForm())},(0,i.zw)(t.commentingPostId===t.id?"Закрыть":"Ответить"),1),ra,(0,o._)("a",{onClick:e[3]||(e[3]=s=>n.activeModal=!0)},(0,i.zw)(s.$store.state.isAdmin?"Удалить":""),1)])])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.comments,(s=>((0,o.wg)(),(0,o.j4)(c,{key:s.id,author:s.author,text:s.text,created_at:s.created_at},null,8,["author","text","created_at"])))),128))])]),(0,o._)("article",ca,[t.commentingPostId===t.id?((0,o.wg)(),(0,o.iD)("div",da,[(0,o._)("div",ua,[(0,o._)("p",ma,[(0,o.wy)((0,o._)("textarea",{class:"textarea",placeholder:"Ваш комментарий...","onUpdate:modelValue":e[4]||(e[4]=s=>n.commentText=s)},null,512),[[a.nr,n.commentText]])])]),(0,o._)("div",_a,[(0,o._)("p",pa,[(0,o._)("button",{class:"button",onClick:e[5]||(e[5]=s=>r.addComment())},"Отправить")])])])):(0,o.kq)("",!0)]),(0,o._)("div",{class:(0,i.C_)(["modal is-align-items-center",{"is-active":n.activeModal}])},[ga,(0,o._)("div",va,[(0,o._)("div",ha,[wa,(0,o._)("div",ka,[(0,o._)("button",{class:"button is-danger mr-2",onClick:e[6]||(e[6]=s=>r.deleteReview())}," Удалить "),(0,o._)("button",{class:"button is-light ml-2",onClick:e[7]||(e[7]=s=>n.activeModal=!1)}," Отмена ")])])])],2)])}var fa=t(1826),ya=t.n(fa);const ja={class:"media"},Ca=(0,o._)("figure",{class:"media-left"},[(0,o._)("p",{class:"image is-64x64"},[(0,o._)("img",{src:"http://localhost:8000/media/placeholder.jpg"})])],-1),Da={class:"media-content"},$a={class:"content"},Ia=(0,o.Uk)(),Ua=(0,o._)("br",null,null,-1),za=(0,o._)("br",null,null,-1);function xa(s,e,t,a,l,n){return(0,o.wg)(),(0,o.iD)("article",ja,[Ca,(0,o._)("div",Da,[(0,o._)("div",$a,[(0,o._)("p",null,[(0,o._)("strong",null,(0,i.zw)(t.author),1),Ia,(0,o._)("small",null,(0,i.zw)(n.formatTime(t.created_at)),1),Ua,(0,o.Uk)(" "+(0,i.zw)(t.text)+" ",1),za])])])])}var La={props:["author","text","created_at"],methods:{formatTime(s){return ya()(s).format("DD.MM.YYYY HH:mm")}}};const Ra=(0,gs.Z)(La,[["render",xa]]);var Pa=Ra,Sa={components:{Comment:Pa},props:["id","author","score","text","created_at","comments","commentingPostId","userReaction","likesCount","dislikesCount"],emits:["commenting","commented","rated","deleted"],data(){return{commentText:null,activeModal:!1}},methods:{formatTime(s){return ya()(s).format("DD.MM.YYYY HH:mm")},toggleReplyForm(){if(!this.$store.state.isAuthenticated)return this.$root.showLogIn=!0,null;this.commentingPostId===this.id?this.$emit("commenting",0):this.$emit("commenting",this.id)},async deleteReview(){await W()["delete"](`reviews/${this.id}/delete/`).then((()=>{this.$emit("deleted",this.id),this.activeModal=!1})).catch((s=>{console.log(s)}))},async addComment(){const s={review:this.id,text:this.commentText};await W().post(`reviews/${this.id}/comment/`,s).then((()=>{this.$emit("commented"),this.commentText=null,this.toggleReplyForm()})).catch((s=>{console.log(s)}))},async manageReaction(s){if(!this.$store.state.isAuthenticated)return this.$root.showLogIn=!0,null;null===this.userReaction?await W().post(`reviews/${this.id}/rate/`,{like:s}).then((()=>{this.$emit("rated",{id:this.id,like:s})})).catch((s=>{console.log(s)})):this.userReaction!==s?await W().patch(`reviews/${this.id}/rate/`,{like:s}).then((()=>{this.$emit("rated",{id:this.id,like:s})})).catch((s=>{console.log(s)})):await W()["delete"](`reviews/${this.id}/rate/`).then((e=>{this.$emit("rated",{id:this.id,like:s})})).catch((s=>{console.log(s)}))}}};const qa=(0,gs.Z)(Sa,[["render",ba],["__scopeId","data-v-560fd439"]]);var Oa=qa,Va={components:{Review:Oa},data(){return{product:null,reviews:null,score:0,user_score:0,user_review:"",new_user_review:null,user_review_id:null,commentingPostId:0,activeModal:!1,isLoading:!1}},mounted(){this.getProductData(),this.getReviews()},methods:{setCommentingPostId(s){this.commentingPostId=s},async toggleBookmark(){if(this.$store.state.isAuthenticated){const s={product:this.product.id};this.product.user_bookmark?await W()["delete"]("/bookmarks/",{data:s}).then((()=>{this.product.user_bookmark=null})).catch((s=>{console.log(s)})):await W().post("/bookmarks/",s).then(this.product.user_bookmark=!0).catch((s=>{console.log(s)}))}else this.$root.showLogIn=!0},setRated(s){for(var e in this.reviews)this.reviews[e].id==s.id&&(null===this.reviews[e].user_reaction?(this.reviews[e].user_reaction=s.like,s.like?this.reviews[e].likes_count+=1:this.reviews[e].dislikes_count+=1):!0===this.reviews[e].user_reaction?s.like?(this.reviews[e].user_reaction=null,this.reviews[e].likes_count-=1):(this.reviews[e].user_reaction=s.like,this.reviews[e].likes_count-=1,this.reviews[e].dislikes_count+=1):s.like?(this.reviews[e].user_reaction=s.like,this.reviews[e].likes_count+=1,this.reviews[e].dislikes_count-=1):(this.reviews[e].user_reaction=null,this.reviews[e].dislikes_count-=1))},async getProductData(){this.$store.commit("setIsLoading",!0);const s=this.$route.params.product_slug;await W().get(`/products/${s}/`).then((s=>{this.product=s.data})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)},async getReviews(){this.$store.commit("setIsLoading",!0);const s=this.$route.params.product_slug;await W().get(`/reviews/?product=${s}`).then((s=>{this.reviews=[];let e=s.data.results;for(var t in e)e[t].author==this.$store.state.username&&(this.user_review_id=e[t].id,this.user_score=e[t].score,this.score=e[t].score,this.user_review=e[t].text),e[t].text&&this.reviews.push(e[t])})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)},async addReview(){if(!this.$store.state.isAuthenticated)return this.$root.showLogIn=!0,null;const s={product_id:this.product.id,score:this.review_id?this.user_score:this.score,text:this.new_user_review};this.isLoading=!0,this.user_review_id?await W().patch(`reviews/${this.user_review_id}/edit/`,s).then((s=>{this.user_score=s.data.score,this.user_review=s.data.review})).catch((s=>{(0,N.toast)({message:s.response.data.detail,type:"is-danger",dismissible:!0,duration:3e3,pauseOnHover:!0,position:"top-center"})})):await W().post("reviews/",s).then((s=>{this.user_score=s.data.score,this.user_review=s.data.review,this.user_review_id=s.data.id})).catch((s=>{console.log(s)})),this.isLoading=!1,this.getReviews()},removeReview(s){for(var e in this.reviews)this.reviews[e].id==s&&this.reviews.splice(e,1)},async setScore(){if(!this.$store.state.isAuthenticated)return this.$root.showLogIn=!0,null;const s={product_id:this.product.id,score:this.review_id?this.user_score:this.score};this.user_review_id?await W().patch(`reviews/${this.user_review_id}/edit/`,s).then((s=>{this.user_score=s.data.score})).catch((s=>{console.log(s)})):await W().post("reviews/",s).then((s=>{this.user_score=s.data.score,this.user_review_id=s.data.id})).catch((s=>{console.log(s)}))}}};const Ta=(0,gs.Z)(Va,[["render",Wt],["__scopeId","data-v-c6136bc8"]]);var Ha=Ta;const Ma=s=>((0,o.dD)("data-v-a244ade6"),s=s(),(0,o.Cn)(),s),Ya={class:"add-product"},Aa={class:"columns"},Ea={class:"column is-6 is-offset-3"},Fa=Ma((()=>(0,o._)("h1",{class:"title"},"Добавление жидкости",-1))),Ba={class:"field"},Za=Ma((()=>(0,o._)("label",null,[(0,o._)("span",{class:"subtitle"},"Название")],-1))),Ka={class:"control"},Wa={key:0,class:"field"},Na=Ma((()=>(0,o._)("label",null,[(0,o._)("span",{class:"subtitle"},"Бренд")],-1))),Ja=Ma((()=>(0,o._)("br",null,null,-1))),Ga={class:"select"},Qa=["value"],Xa={class:"field"},so=Ma((()=>(0,o._)("label",null,[(0,o._)("span",{class:"subtitle"},"Описание")],-1))),eo={class:"control"},to={key:1,class:"field"},ao=Ma((()=>(0,o._)("label",null,[(0,o._)("span",{class:"subtitle"},"Вкусы")],-1))),oo=Ma((()=>(0,o._)("br",null,null,-1))),io={key:2,class:"field"},lo=Ma((()=>(0,o._)("label",null,[(0,o._)("span",{class:"subtitle"},"Содержание никотина")],-1))),no=Ma((()=>(0,o._)("br",null,null,-1))),ro={class:"select is-multiple"},co=["value"],uo={class:"field"},mo={class:"control"},_o={class:"checkbox"},po=(0,o.Uk)(" Солевой никотин "),go={class:"field"},vo=Ma((()=>(0,o._)("label",null,[(0,o._)("span",{class:"subtitle"},"Изображение")],-1))),ho={key:0,class:"control"},wo={class:"file has-name"},ko={class:"file-label"},bo=Ma((()=>(0,o._)("span",{class:"file-cta"},[(0,o._)("span",{class:"file-icon"},[(0,o._)("i",{class:"fas fa-upload"})]),(0,o._)("span",{class:"file-label"}," Выберите файл ")],-1))),fo={class:"file-name"},yo={key:3,class:"notification is-danger"},jo=Ma((()=>(0,o._)("div",{class:"field"},[(0,o._)("div",{class:"control"},[(0,o._)("button",{class:"button is-dark"},"Отправить")])],-1)));function Co(s,e,t,l,n,r){const c=(0,o.up)("VueMultiselect"),d=(0,o.up)("cropper");return(0,o.wg)(),(0,o.iD)("div",Ya,[(0,o._)("div",Aa,[(0,o._)("div",Ea,[Fa,(0,o._)("form",{onSubmit:e[7]||(e[7]=(0,a.iM)(((...s)=>r.submitForm&&r.submitForm(...s)),["prevent"]))},[(0,o._)("div",Ba,[Za,(0,o._)("div",Ka,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=s=>n.productData.name=s)},null,512),[[a.nr,n.productData.name]])])]),n.options?((0,o.wg)(),(0,o.iD)("div",Wa,[Na,Ja,(0,o._)("div",Ga,[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.productData.brand=s)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.options.brands,(s=>((0,o.wg)(),(0,o.iD)("option",{key:s.id,value:s.id},(0,i.zw)(s.name),9,Qa)))),128))],512),[[a.bM,n.productData.brand]])])])):(0,o.kq)("",!0),(0,o._)("div",Xa,[so,(0,o._)("div",eo,[(0,o.wy)((0,o._)("textarea",{class:"textarea",cols:"100",rows:"5","onUpdate:modelValue":e[2]||(e[2]=s=>n.productData.description=s)},"\n              ",512),[[a.nr,n.productData.description]])])]),n.options.flavors?((0,o.wg)(),(0,o.iD)("div",to,[ao,oo,(0,o.Wm)(c,{modelValue:n.productData.flavors,"onUpdate:modelValue":e[3]||(e[3]=s=>n.productData.flavors=s),options:n.options.flavors,multiple:!0,taggable:!0,onTag:r.addTag,"tag-placeholder":"Add this as new tag",placeholder:"Type to search or add tag",label:"name","track-by":"id"},null,8,["modelValue","options","onTag"])])):(0,o.kq)("",!0),n.options?((0,o.wg)(),(0,o.iD)("div",io,[lo,no,(0,o._)("div",ro,[(0,o.wy)((0,o._)("select",{multiple:"",size:"5","onUpdate:modelValue":e[4]||(e[4]=s=>n.productData.nic_content=s)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.options.nic_content,(s=>((0,o.wg)(),(0,o.iD)("option",{key:s.id,value:s.id},(0,i.zw)(s.amount),9,co)))),128))],512),[[a.bM,n.productData.nic_content]])])])):(0,o.kq)("",!0),(0,o._)("div",uo,[(0,o._)("div",mo,[(0,o._)("label",_o,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>n.productData.is_salt=s)},null,512),[[a.e8,n.productData.is_salt]]),po])])]),(0,o._)("div",go,[vo,n.image.src?((0,o.wg)(),(0,o.iD)("div",ho,[(0,o.Wm)(d,{class:"cropper",ref:"cropper",src:n.image.src,"stencil-props":{handlers:{},movable:!1,scalable:!1},"stencil-size":{width:300,height:300},"image-restriction":"stencil"},null,8,["src"])])):(0,o.kq)("",!0)]),(0,o._)("div",wo,[(0,o._)("label",ko,[(0,o._)("input",{class:"file-input",type:"file",accept:"image/png, image/jpeg",onChange:e[6]||(e[6]=s=>r.uploadImage(s)),name:"image"},null,32),bo,(0,o._)("span",fo,(0,i.zw)(n.image.name),1)])]),n.errors.length?((0,o.wg)(),(0,o.iD)("div",yo,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.errors,(s=>((0,o.wg)(),(0,o.iD)("p",{key:s},(0,i.zw)(s),1)))),128))])):(0,o.kq)("",!0),jo],32)])])])}var Do=t(6929),$o=t(8553),Io={components:{Cropper:Do.fl,VueMultiselect:$o.ZP},data(){return{options:[],image:{src:null,type:null,name:null},errors:[],productData:{name:"",description:"",nic_content:[],flavors:[],brand:"",is_salt:!1}}},mounted(){this.getOptions()},methods:{addTag(s){const e={name:s};this.options.flavors.push(e),this.productData.flavors.push(e)},submitForm(){const s=new FormData,e=this.$refs.cropper.getResult();e.canvas.toBlob((e=>{for(var t of this.productData.flavors)s.append("flavor_id",t);for(var t of this.productData.nic_content)s.append("nic_content_id",t);s.append("image",e,this.image.name),s.append("name",this.productData.name),s.append("description",this.productData.description),s.append("brand_id",this.productData.brand),s.append("is_salt",this.productData.is_salt),W().post("products/",s,{headers:{"Content-Type":"multipart/form-data"}}).then((s=>{this.showSuccess(),this.productData={name:"",description:"",nic_content:[],flavors:[],brand:"",is_salt:!1},this.image={src:null,type:null,name:null}})).catch((s=>{console.log(s)}))}),this.image.type)},uploadImage(s){const{files:e}=s.target;if(e&&e[0]){this.image.src&&URL.revokeObjectURL(this.image.src);const s=URL.createObjectURL(e[0]);this.image={src:s,type:e[0].type,name:e[0].name}}},cropImage(){const s=this.$refs.cropper.getResult();s.canvas.toBlob((s=>{console.log(s)}),this.image.type)},async getOptions(){await W().get("product-options/").then((s=>{this.options=s.data})).catch((s=>{console.log(s)}))},showSuccess(){(0,N.toast)({message:"Спасибо! Информация отправлена на проверку и скоро будет опубликована на сайте.",type:"is-success",dismissible:!0,duration:1e4,pauseOnHover:!0,position:"top-center"})}}};const Uo=(0,gs.Z)(Io,[["render",Co],["__scopeId","data-v-a244ade6"]]);var zo=Uo;const xo={key:0,class:"products"},Lo=(0,o._)("p",{class:"title"},"Топ жидкостей",-1);function Ro(s,e,t,a,i,l){const n=(0,o.up)("Product");return i.products?((0,o.wg)(),(0,o.iD)("div",xo,[Lo,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.products,(s=>((0,o.wg)(),(0,o.j4)(n,{key:s.id,name:s.name,image:s.image_url,slug:s.slug,avg_score:s.get_avg_score,flavors:s.flavors,reviews_amount:s.get_reviews_amount,score_amount:s.get_score_amount},null,8,["name","image","slug","avg_score","flavors","reviews_amount","score_amount"])))),128))])):(0,o.kq)("",!0)}var Po={components:{Product:Ye},data(){return{products:null}},mounted(){this.getProducts()},methods:{async getProducts(){this.$store.commit("setIsLoading",!0),await W().get("/products/").then((s=>{this.products=s.data,console.log(this.products)})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)}}};const So=(0,gs.Z)(Po,[["render",Ro]]);var qo=So;const Oo=s=>((0,o.dD)("data-v-334cfd73"),s=s(),(0,o.Cn)(),s),Vo={class:"container"},To={class:"tabs is-medium"},Ho={key:0,class:"columns profile"},Mo={class:"column is-4"},Yo={class:"avatar image is-1by1"},Ao=["src"],Eo={class:"column is-8"},Fo=Oo((()=>(0,o._)("strong",{class:"title is-6"},"Имя ",-1))),Bo=Oo((()=>(0,o._)("strong",{class:"title is-6"},"Возраст ",-1))),Zo=Oo((()=>(0,o._)("strong",{class:"title is-6"},"Город ",-1))),Ko=Oo((()=>(0,o._)("strong",{class:"title is-6"},"Telegram ",-1))),Wo=Oo((()=>(0,o._)("strong",{class:"title is-6"},"VK ",-1))),No=Oo((()=>(0,o._)("strong",{class:"title is-6"},"Youtube ",-1))),Jo=Oo((()=>(0,o._)("p",{class:"mt-5"},[(0,o._)("strong",{class:"title is-6"},"Обо мне ")],-1))),Go={key:1,class:"reviews"},Qo={key:0},Xo={key:2,class:"bookmarks"},si={key:0};function ei(s,e,t,a,l,n){const r=(0,o.up)("ProfileReview"),c=(0,o.up)("Bookmark"),d=(0,o.up)("UserInfoForm");return(0,o.wg)(),(0,o.iD)("div",Vo,[(0,o._)("div",To,[(0,o._)("ul",null,[(0,o._)("li",{class:(0,i.C_)(["profile"===l.activeTab?"is-active":""])},[(0,o._)("a",{onClick:e[0]||(e[0]=s=>l.activeTab="profile")},"Профиль")],2),(0,o._)("li",{class:(0,i.C_)(["reviews"===l.activeTab?"is-active":""])},[(0,o._)("a",{onClick:e[1]||(e[1]=s=>l.activeTab="reviews")},"Отзывы и оценки")],2),(0,o._)("li",{class:(0,i.C_)(["bookmarks"===l.activeTab?"is-active":""])},[(0,o._)("a",{onClick:e[2]||(e[2]=s=>l.activeTab="bookmarks")},"Закладки ("+(0,i.zw)(l.bookmarksCount)+")",1)],2)])]),"profile"==l.activeTab&&l.userInfo?((0,o.wg)(),(0,o.iD)("div",Ho,[(0,o._)("div",Mo,[(0,o._)("figure",Yo,[(0,o._)("img",{src:l.userInfo.profile.avatar},null,8,Ao)]),(0,o._)("a",{class:"button",onClick:e[3]||(e[3]=s=>l.showEditUserInfo=!0)},"Редактировать")]),(0,o._)("div",Eo,[(0,o._)("p",null,[Fo,(0,o._)("span",null,(0,i.zw)(l.userInfo.username),1)]),(0,o._)("p",null,[Bo,(0,o._)("span",null,(0,i.zw)(n.getAge(l.userInfo.profile.birthday)||"-"),1)]),(0,o._)("p",null,[Zo,(0,o._)("span",null,(0,i.zw)(l.userInfo.profile.city||"-"),1)]),(0,o._)("p",null,[Ko,(0,o._)("span",null,(0,i.zw)(l.userInfo.profile.tg||"-"),1)]),(0,o._)("p",null,[Wo,(0,o._)("span",null,(0,i.zw)(l.userInfo.profile.vk||"-"),1)]),(0,o._)("p",null,[No,(0,o._)("span",null,(0,i.zw)(l.userInfo.profile.yt||"-"),1)]),Jo,(0,o._)("p",null,(0,i.zw)(l.userInfo.profile.about||"-"),1)])])):(0,o.kq)("",!0),"reviews"==l.activeTab?((0,o.wg)(),(0,o.iD)("div",Go,[l.reviews.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",Qo,"Нет ни одного отзыва")),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.reviews,(s=>((0,o.wg)(),(0,o.j4)(r,{key:s.id,id:s.id,product:s.product.name,productSlug:s.product.slug,productImage:s.product.image_url,score:s.score,text:s.text,created_at:s.created_at,likesCount:s.likes_count,dislikesCount:s.dislikes_count,comments:s.comments},null,8,["id","product","productSlug","productImage","score","text","created_at","likesCount","dislikesCount","comments"])))),128))])):(0,o.kq)("",!0),"bookmarks"==l.activeTab?((0,o.wg)(),(0,o.iD)("div",Xo,[l.bookmarks.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("p",si,"Нет закладок")),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.bookmarks,(s=>((0,o.wg)(),(0,o.j4)(c,{key:s.id,id:s.id,name:s.name,image:s.image_url,slug:s.slug,avg_score:s.avg_score,flavors:s.flavors,reviews_amount:s.reviews_count,score_amount:s.score_count,onDeleted:n.deleteBookmark},null,8,["id","name","image","slug","avg_score","flavors","reviews_amount","score_amount","onDeleted"])))),128)),l.nextBookmarks&&l.bookmarksCount>10?((0,o.wg)(),(0,o.iD)("a",{key:1,class:"button is-success",onClick:e[4]||(e[4]=s=>n.getNextBookmarks())},"Показать ещё")):(0,o.kq)("",!0)])):(0,o.kq)("",!0),l.showEditUserInfo&&l.userInfo?((0,o.wg)(),(0,o.j4)(d,{key:3,birthday:l.userInfo.profile.birthday,city:l.userInfo.profile.city,tg:l.userInfo.profile.tg,vk:l.userInfo.profile.vk,yt:l.userInfo.profile.yt,about:l.userInfo.profile.about,onChangedUserInfo:e[5]||(e[5]=s=>{n.getUserInfo(),l.showEditUserInfo=!1}),onClose:e[6]||(e[6]=s=>l.showEditUserInfo=!1)},null,8,["birthday","city","tg","vk","yt","about"])):(0,o.kq)("",!0)])}const ti=s=>((0,o.dD)("data-v-a785b2ce"),s=s(),(0,o.Cn)(),s),ai={class:"columns box is-vcentered my-5"},oi={class:"column is-2"},ii={class:"image is-1by1"},li=["src"],ni={class:"column is-3"},ri={class:"title is-5"},ci={class:"column is-2"},di=ti((()=>(0,o._)("i",{class:"bi bi-chat-left-text"},null,-1))),ui=ti((()=>(0,o._)("i",{class:"bi bi-star-fill"},null,-1))),mi={class:"column"},_i={class:"tags"},pi={class:"column"},gi={class:"tag is-primary is-large"},vi=ti((()=>(0,o._)("i",{class:"bi bi-star-fill"},null,-1))),hi={class:"column"},wi=ti((()=>(0,o._)("span",null,"Удалить",-1))),ki=[wi];function bi(s,e,t,a,l,n){const r=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",ai,[(0,o._)("div",oi,[(0,o._)("figure",ii,[(0,o._)("img",{src:t.image},null,8,li)])]),(0,o._)("div",ni,[(0,o._)("p",ri,[(0,o.Wm)(r,{to:{name:"product-detail",params:{product_slug:t.slug}}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.name),1)])),_:1},8,["to"])])]),(0,o._)("div",ci,[(0,o._)("span",null,[di,(0,o.Uk)(" "+(0,i.zw)(t.reviews_amount),1)]),(0,o._)("span",null,[ui,(0,o.Uk)(" "+(0,i.zw)(t.score_amount),1)])]),(0,o._)("div",mi,[(0,o._)("p",_i,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.flavors,(s=>((0,o.wg)(),(0,o.iD)("span",{class:"tag is-info",key:s.id},(0,i.zw)(s),1)))),128))])]),(0,o._)("div",pi,[(0,o._)("span",gi,[vi,(0,o.Uk)(" "+(0,i.zw)(t.avg_score),1)])]),(0,o._)("div",hi,[(0,o._)("a",{class:"button is-danger",onClick:e[0]||(e[0]=s=>n.removeBookmark())},ki)])])}var fi={props:["id","name","image","slug","reviews_amount","score_amount","flavors","avg_score"],emits:["deleted"],methods:{async removeBookmark(){const s={product:this.id};await W()["delete"]("/bookmarks/",{data:s}).then((()=>{this.$emit("deleted",this.id)})).catch((s=>{console.log(s)}))}}};const yi=(0,gs.Z)(fi,[["render",bi],["__scopeId","data-v-a785b2ce"]]);var ji=yi;const Ci=s=>((0,o.dD)("data-v-a99b54ac"),s=s(),(0,o.Cn)(),s),Di={class:"review"},$i={class:"media"},Ii={class:"media-left"},Ui={class:"image is-64x64"},zi=["src"],xi={class:"media-content"},Li={class:"content"},Ri=Ci((()=>(0,o._)("br",null,null,-1))),Pi=Ci((()=>(0,o._)("strong",null,"Оценка:",-1))),Si=Ci((()=>(0,o._)("br",null,null,-1))),qi=Ci((()=>(0,o._)("br",null,null,-1))),Oi=Ci((()=>(0,o._)("span",null,[(0,o._)("i",{class:"fa-thumbs-up fa-regular"})],-1))),Vi=(0,o.Uk)(" · "),Ti=Ci((()=>(0,o._)("span",null,[(0,o._)("i",{class:"fa-thumbs-down fa-regular"})],-1)));function Hi(s,e,t,a,l,n){const r=(0,o.up)("router-link"),c=(0,o.up)("Comment");return(0,o.wg)(),(0,o.iD)("div",Di,[(0,o._)("article",$i,[(0,o._)("figure",Ii,[(0,o._)("p",Ui,[(0,o._)("img",{src:t.productImage},null,8,zi)])]),(0,o._)("div",xi,[(0,o._)("div",Li,[(0,o._)("p",null,[(0,o.Wm)(r,{to:{name:"product-detail",params:{product_slug:t.productSlug}}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t.product),1)])),_:1},8,["to"]),(0,o._)("small",null,(0,i.zw)(n.formatTime(t.created_at)),1),Ri,Pi,(0,o.Uk)(" "+(0,i.zw)(t.score)+" ",1),Si,(0,o.Uk)(" "+(0,i.zw)(t.text)+" ",1),qi,(0,o._)("small",null,[Oi,(0,o._)("small",null,(0,i.zw)(t.likesCount),1),Vi,Ti,(0,o._)("small",null,(0,i.zw)(t.dislikesCount),1)])])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.comments,(s=>((0,o.wg)(),(0,o.j4)(c,{key:s.id,author:s.author,text:s.text,created_at:s.created_at},null,8,["author","text","created_at"])))),128))])])])}var Mi={components:{Comment:Pa},props:["id","product","productSlug","productImage","score","text","created_at","comments","likesCount","dislikesCount"],methods:{formatTime(s){return ya()(s).format("DD.MM.YYYY HH:mm")}}};const Yi=(0,gs.Z)(Mi,[["render",Hi],["__scopeId","data-v-a99b54ac"]]);var Ai=Yi;const Ei={class:"modal is-active"},Fi={class:"modal-content"},Bi={class:"box"},Zi={class:"level"},Ki=(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Изменение информации профиля")],-1),Wi={class:"level-right"},Ni={class:"field"},Ji=(0,o._)("label",null,"Дата рождения",-1),Gi={class:"control"},Qi={class:"field"},Xi=(0,o._)("label",null,"Город",-1),sl={class:"control"},el={class:"field"},tl=(0,o._)("label",null,"Telegram",-1),al={class:"control"},ol={class:"field"},il=(0,o._)("label",null,"VK",-1),ll={class:"control"},nl={class:"field"},rl=(0,o._)("label",null,"Youtube",-1),cl={class:"control"},dl={class:"field"},ul=(0,o._)("label",null,"Обо мне",-1),ml={class:"control"},_l={class:"level"},pl={class:"level-left"},gl={class:"level"},vl={class:"level-left"};function hl(s,e,t,l,n,r){const c=(0,o.up)("ChangeUsername"),d=(0,o.up)("ChangePassword");return(0,o.wg)(),(0,o.iD)("div",Ei,[(0,o._)("div",{class:"modal-background",onClick:e[0]||(e[0]=e=>s.$emit("close"))}),(0,o._)("div",Fi,[(0,o._)("div",Bi,[(0,o._)("div",Zi,[Ki,(0,o._)("div",Wi,[(0,o._)("button",{class:"delete is-medium","aria-label":"close",onClick:e[1]||(e[1]=e=>s.$emit("close"))})])]),(0,o._)("div",null,[(0,o._)("div",Ni,[Ji,(0,o._)("div",Gi,[(0,o.wy)((0,o._)("input",{type:"date",class:"input","onUpdate:modelValue":e[2]||(e[2]=s=>t.birthday=s)},null,512),[[a.nr,t.birthday]])])]),(0,o._)("div",Qi,[Xi,(0,o._)("div",sl,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[3]||(e[3]=s=>t.city=s)},null,512),[[a.nr,t.city]])])]),(0,o._)("div",el,[tl,(0,o._)("div",al,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[4]||(e[4]=s=>t.tg=s)},null,512),[[a.nr,t.tg]])])]),(0,o._)("div",ol,[il,(0,o._)("div",ll,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[5]||(e[5]=s=>t.vk=s)},null,512),[[a.nr,t.vk]])])]),(0,o._)("div",nl,[rl,(0,o._)("div",cl,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[6]||(e[6]=s=>t.yt=s)},null,512),[[a.nr,t.yt]])])]),(0,o._)("div",dl,[ul,(0,o._)("div",ml,[(0,o.wy)((0,o._)("textarea",{class:"textarea","onUpdate:modelValue":e[7]||(e[7]=s=>t.about=s)},null,512),[[a.nr,t.about]])])]),(0,o._)("div",_l,[(0,o._)("div",pl,[(0,o._)("button",{class:"button is-dark",onClick:e[8]||(e[8]=s=>n.showEditUsername=!0)},"Изменить имя"),(0,o._)("button",{class:"button is-dark mx-2",onClick:e[9]||(e[9]=s=>n.showEditPassword=!0)},"Изменить пароль"),(0,o._)("button",{class:"button is-dark",onClick:e[10]||(e[10]=s=>n.showEditEmail=!0)},"Изменить email")])]),(0,o._)("div",gl,[(0,o._)("div",vl,[(0,o._)("button",{class:(0,i.C_)(["button is-dark",{"is-loading":n.isLoading}]),onClick:e[11]||(e[11]=s=>r.submitForm())},"Сохранить",2)])])])])]),n.showEditUsername?((0,o.wg)(),(0,o.j4)(c,{key:0,onClose:e[12]||(e[12]=s=>n.showEditUsername=!1)})):(0,o.kq)("",!0),n.showEditPassword?((0,o.wg)(),(0,o.j4)(d,{key:1,onClose:e[13]||(e[13]=s=>n.showEditPassword=!1)})):(0,o.kq)("",!0)])}const wl={class:"modal is-active"},kl={class:"modal-content"},bl={class:"box"},fl={class:"level"},yl=(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Изменение имени пользователя")],-1),jl={class:"level-right"},Cl={class:"field"},Dl=(0,o._)("label",null,"Новое имя",-1),$l={class:"control"},Il={key:0,class:"help is-danger"},Ul={class:"field"},zl=(0,o._)("label",null,"Пароль",-1),xl={class:"control"},Ll={key:0,class:"help is-danger"},Rl={class:"level"},Pl={class:"level-left"};function Sl(s,e,t,l,n,r){return(0,o.wg)(),(0,o.iD)("div",wl,[(0,o._)("div",{class:"modal-background",onClick:e[0]||(e[0]=e=>s.$emit("close"))}),(0,o._)("div",kl,[(0,o._)("div",bl,[(0,o._)("div",fl,[yl,(0,o._)("div",jl,[(0,o._)("button",{class:"delete is-medium","aria-label":"close",onClick:e[1]||(e[1]=e=>s.$emit("close"))})])]),(0,o._)("div",null,[(0,o._)("div",Cl,[Dl,(0,o._)("div",$l,[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e[2]||(e[2]=s=>n.new_username=s)},null,512),[[a.nr,n.new_username]])]),n.errors.new_username?((0,o.wg)(),(0,o.iD)("p",Il,(0,i.zw)(n.errors.new_username[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",Ul,[zl,(0,o._)("div",xl,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[3]||(e[3]=s=>n.current_password=s)},null,512),[[a.nr,n.current_password]])]),n.errors.current_password?((0,o.wg)(),(0,o.iD)("p",Ll,(0,i.zw)(n.errors.current_password[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",Rl,[(0,o._)("div",Pl,[(0,o._)("button",{class:(0,i.C_)(["button is-dark",{"is-loading":n.isLoading}]),onClick:e[4]||(e[4]=s=>r.submitForm())}," Сохранить ",2)])])])])])])}var ql={emits:["close"],data(){return{new_username:"",current_password:"",errors:{},isLoading:!1}},methods:{async submitForm(){if(this.errors={},0==Object.keys(this.errors).length){this.$store.state.username;const s={new_username:this.new_username,current_password:this.current_password};this.isLoading=!0,await W().post("/users/set_username/",s).then((()=>{(0,N.toast)({message:"Имя пользователя изменено. Войдите с новыми данными.",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:1e4,position:"top-center"}),this.$root.logout()})).catch((s=>{this.errors=s.response.data})),this.isLoading=!1}}}};const Ol=(0,gs.Z)(ql,[["render",Sl]]);var Vl=Ol;const Tl={class:"modal is-active"},Hl={class:"modal-content"},Ml={class:"box"},Yl={class:"level"},Al=(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Изменение пароля")],-1),El={class:"level-right"},Fl={class:"field"},Bl=(0,o._)("label",null,"Текущий пароль",-1),Zl={class:"control"},Kl={key:0,class:"help is-danger"},Wl={class:"field"},Nl=(0,o._)("label",null,"Новый пароль",-1),Jl={class:"control"},Gl={key:0,class:"help is-danger"},Ql={class:"field"},Xl=(0,o._)("label",null,"Подтвердите пароль",-1),sn={class:"control"},en={key:0,class:"help is-danger"},tn={class:"level"},an={class:"level-left"};function on(s,e,t,l,n,r){return(0,o.wg)(),(0,o.iD)("div",Tl,[(0,o._)("div",{class:"modal-background",onClick:e[0]||(e[0]=e=>s.$emit("close"))}),(0,o._)("div",Hl,[(0,o._)("div",Ml,[(0,o._)("div",Yl,[Al,(0,o._)("div",El,[(0,o._)("button",{class:"delete is-medium","aria-label":"close",onClick:e[1]||(e[1]=e=>s.$emit("close"))})])]),(0,o._)("div",null,[(0,o._)("div",Fl,[Bl,(0,o._)("div",Zl,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=s=>n.current_password=s)},null,512),[[a.nr,n.current_password]])]),n.errors.current_password?((0,o.wg)(),(0,o.iD)("p",Kl,(0,i.zw)(n.errors.current_password[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",Wl,[Nl,(0,o._)("div",Jl,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[3]||(e[3]=s=>n.new_password=s)},null,512),[[a.nr,n.new_password]])]),n.errors.new_password?((0,o.wg)(),(0,o.iD)("p",Gl,(0,i.zw)(n.errors.new_password[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",Ql,[Xl,(0,o._)("div",sn,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[4]||(e[4]=s=>n.re_new_password=s)},null,512),[[a.nr,n.re_new_password]])]),n.errors.re_new_password?((0,o.wg)(),(0,o.iD)("p",en,(0,i.zw)(n.errors.re_new_password[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",tn,[(0,o._)("div",an,[(0,o._)("button",{class:(0,i.C_)(["button is-dark",{"is-loading":n.isLoading}]),onClick:e[5]||(e[5]=s=>r.submitForm())}," Сохранить ",2)])])])])])])}var ln={emits:["close"],data(){return{current_password:"",new_password:"",re_new_password:"",errors:{},isLoading:!1}},methods:{async submitForm(){if(this.errors={},0==Object.keys(this.errors).length){this.$store.state.username;const s={new_password:this.new_password,current_password:this.current_password,re_new_password:this.re_new_password};this.isLoading=!0,await W().post("/users/set_password/",s).then((()=>{(0,N.toast)({message:"Пароль изменен. Войдите с новыми данными.",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:1e4,position:"top-center"}),this.$root.logout()})).catch((s=>{this.errors=s.response.data})),this.isLoading=!1}}}};const nn=(0,gs.Z)(ln,[["render",on]]);var rn=nn;const cn={class:"modal is-active"},dn={class:"modal-content"},un={class:"box"},mn={class:"level"},_n=(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Изменение пароля")],-1),pn={class:"level-right"},gn={class:"field"},vn=(0,o._)("label",null,"Текущий пароль",-1),hn={class:"control"},wn={key:0,class:"help is-danger"},kn={class:"field"},bn=(0,o._)("label",null,"Новый пароль",-1),fn={class:"control"},yn={key:0,class:"help is-danger"},jn={class:"field"},Cn=(0,o._)("label",null,"Подтвердите пароль",-1),Dn={class:"control"},$n={key:0,class:"help is-danger"},In={class:"level"},Un={class:"level-left"};function zn(s,e,t,l,n,r){return(0,o.wg)(),(0,o.iD)("div",cn,[(0,o._)("div",{class:"modal-background",onClick:e[0]||(e[0]=e=>s.$emit("close"))}),(0,o._)("div",dn,[(0,o._)("div",un,[(0,o._)("div",mn,[_n,(0,o._)("div",pn,[(0,o._)("button",{class:"delete is-medium","aria-label":"close",onClick:e[1]||(e[1]=e=>s.$emit("close"))})])]),(0,o._)("div",null,[(0,o._)("div",gn,[vn,(0,o._)("div",hn,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=s=>n.current_password=s)},null,512),[[a.nr,n.current_password]])]),n.errors.current_password?((0,o.wg)(),(0,o.iD)("p",wn,(0,i.zw)(n.errors.current_password[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",kn,[bn,(0,o._)("div",fn,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[3]||(e[3]=s=>n.new_password=s)},null,512),[[a.nr,n.new_password]])]),n.errors.new_password?((0,o.wg)(),(0,o.iD)("p",yn,(0,i.zw)(n.errors.new_password[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",jn,[Cn,(0,o._)("div",Dn,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[4]||(e[4]=s=>n.re_new_password=s)},null,512),[[a.nr,n.re_new_password]])]),n.errors.re_new_password?((0,o.wg)(),(0,o.iD)("p",$n,(0,i.zw)(n.errors.re_new_password[0]),1)):(0,o.kq)("",!0)]),(0,o._)("div",In,[(0,o._)("div",Un,[(0,o._)("button",{class:(0,i.C_)(["button is-dark",{"is-loading":n.isLoading}]),onClick:e[5]||(e[5]=s=>r.submitForm())}," Сохранить ",2)])])])])])])}var xn={emits:["close"],data(){return{current_password:"",new_password:"",re_new_password:"",errors:{},isLoading:!1}},methods:{async submitForm(){if(this.errors={},0==Object.keys(this.errors).length){this.$store.state.username;const s={new_password:this.new_password,current_password:this.current_password,re_new_password:this.re_new_password};this.isLoading=!0,await W().post("/users/set_password/",s).then((()=>{(0,N.toast)({message:"Пароль изменен. Войдите с новыми данными.",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:1e4,position:"top-center"}),this.$root.logout()})).catch((s=>{this.errors=s.response.data})),this.isLoading=!1}}}};const Ln=(0,gs.Z)(xn,[["render",zn]]);var Rn=Ln,Pn={props:["birthday","city","tg","vk","yt","about"],emits:["changedUserInfo","close"],components:{ChangeUsername:Vl,ChangePassword:rn,ChangeEmail:Rn},data(){return{errors:{},isLoading:!1,showEditUsername:!1,showEditPassword:!1,showEditEmail:!1}},methods:{async submitForm(){if(this.errors={},0==Object.keys(this.errors).length){const s=this.$store.state.username,e={profile:{birthday:this.birthday,about:this.about,city:this.city,tg:this.tg,vk:this.vk,yt:this.yt}};this.isLoading=!0,await W().patch(`/user/${s}/`,e).then((()=>{(0,N.toast)({message:"Информация изменена",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"top-center"}),this.$emit("changedUserInfo")})).catch((s=>{if(console.log(s),s.response)for(const e in s.response.data)this.errors[e]=s.response.data[e];else(s.message||s.request)&&(this.errors["other"]="Что-то пошло не так. Попробуйте ещё раз.");console.log(this.errors)})),this.isLoading=!1}}}};const Sn=(0,gs.Z)(Pn,[["render",hl]]);var qn=Sn,On={components:{Bookmark:ji,ProfileReview:Ai,UserInfoForm:qn},data(){return{activeTab:"profile",showEditUserInfo:!1,reviews:null,userInfo:null,bookmarks:[],bookmarksCount:null,nextBookmarks:null}},mounted(){this.getReviews(),this.getUserInfo(),this.getBookmarks()},methods:{getAge(s){return ya()().diff(s,"years")},async getReviews(){this.$store.commit("setIsLoading",!0);const s=this.$store.state.username;await W().get(`/reviews/?author=${s}`).then((s=>{this.reviews=s.data.results})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)},async getUserInfo(){this.$store.commit("setIsLoading",!0);const s=this.$store.state.username;await W().get(`/user/${s}/`).then((s=>{this.userInfo=s.data})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)},async getBookmarks(){this.$store.commit("setIsLoading",!0);const s=this.$store.state.username;await W().get(`/products/?bookmarks_author=${s}&ordering=-bookmarks__created_at`).then((s=>{this.bookmarks.push(...s.data.results),this.nextBookmarks=s.data.next,this.bookmarksCount=s.data.count})).catch((s=>{console.log(s)})),this.$store.commit("setIsLoading",!1)},async getNextBookmarks(){await W().get(this.nextBookmarks).then((s=>{this.bookmarks.push(...s.data.results),this.nextBookmarks=s.data.next})).catch((s=>{console.log(s)}))},deleteBookmark(s){for(var e in this.bookmarks)this.bookmarks[e].id==s&&(this.bookmarks.splice(e,1),this.bookmarksCount-=1)}}};const Vn=(0,gs.Z)(On,[["render",ei],["__scopeId","data-v-334cfd73"]]);var Tn=Vn;const Hn=(0,o._)("p",{class:"title"},"Подтверждение регистрации",-1),Mn=[Hn];function Yn(s,e,t,a,i,l){return(0,o.wg)(),(0,o.iD)("div",null,Mn)}var An={mounted(){this.activate()},methods:{async activate(){const s={uid:this.$route.params.uid,token:this.$route.params.token};await W().post("users/activation/",s).then((()=>{(0,N.toast)({message:"Email подтвержден! Теперь вы можете войти на сайт.",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:1e4,position:"top-center"}),this.$router.replace("/")})).catch((s=>{(0,N.toast)({message:"Что-то пошло не так!",type:"is-danger",dismissible:!0,pauseOnHover:!0,duration:1e4,position:"top-center"}),this.$router.replace("/"),console.log(s.response.data)}))}}};const En=(0,gs.Z)(An,[["render",Yn]]);var Fn=En;const Bn={class:"box"},Zn=(0,o._)("div",{class:"level"},[(0,o._)("div",{class:"level-left"},[(0,o._)("h1",{class:"title"},"Изменение пароля")])],-1),Kn={class:"field"},Wn=(0,o._)("label",null,"Новый пароль",-1),Nn={class:"control"},Jn={class:"field"},Gn=(0,o._)("label",null,"Подтвердите пароль",-1),Qn={class:"control"},Xn={class:"level"},sr={class:"level-left"};function er(s,e,t,l,n,r){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",Bn,[Zn,(0,o._)("div",null,[(0,o._)("div",Kn,[Wn,(0,o._)("div",Nn,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[0]||(e[0]=s=>n.new_password=s)},null,512),[[a.nr,n.new_password]])])]),(0,o._)("div",Jn,[Gn,(0,o._)("div",Qn,[(0,o.wy)((0,o._)("input",{type:"password",class:"input","onUpdate:modelValue":e[1]||(e[1]=s=>n.re_new_password=s)},null,512),[[a.nr,n.re_new_password]])])]),(0,o._)("div",Xn,[(0,o._)("div",sr,[(0,o._)("button",{class:(0,i.C_)(["button is-dark",{"is-loading":n.isLoading}]),onClick:e[2]||(e[2]=s=>r.setPassword())}," Сохранить ",2)])])])])])}var tr={data(){return{new_password:"",re_new_password:"",isLoading:!1}},methods:{async setPassword(){this.isLoading=!0;const s={uid:this.$route.params.uid,token:this.$route.params.token,new_password:this.new_password,re_new_password:this.re_new_password};await W().post("users/reset_password_confirm/",s).then((()=>{(0,N.toast)({message:"Пароль изменен. Теперь вы можете войти с новым паролем.",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:1e4,position:"top-center"}),this.$router.replace("/")})).catch((s=>{(0,N.toast)({message:"Что-то пошло не так!",type:"is-danger",dismissible:!0,pauseOnHover:!0,duration:1e4,position:"top-center"}),this.$router.replace("/"),console.log(s.response.data)})),this.isLoading=!1}}};const ar=(0,gs.Z)(tr,[["render",er]]);var or=ar;const ir=[{path:"/",name:"home",component:Qs},{path:"/top-liqs",name:"liquids-list",component:Je},{path:"/brand/:brand_slug",name:"brand-list",component:Fe},{path:"/product/:product_slug",name:"product-detail",component:Ha},{path:"/add-liquid",name:"add-liquid",component:zo},{path:"/admin",name:"admin",component:qo},{path:"/profile",name:"profile",component:Tn},{path:"/activate/:uid/:token",name:"activate",component:Fn},{path:"/password-reset/:uid/:token",name:"reset-password",component:or}],lr=(0,Ks.p7)({history:(0,Ks.PO)("/"),routes:ir});var nr=lr,rr=t(2357),cr=(0,rr.MT)({state:{isAuthenticated:!1,isAdmin:!1,token:null,isLoading:!1,username:null},getters:{},mutations:{initializeStore(s){localStorage.getItem("token")?(s.token=localStorage.getItem("token"),s.username=localStorage.getItem("username"),s.isAdmin="true"===localStorage.getItem("isAdmin"),s.isAuthenticated=!0):(s.token=null,s.isAuthenticated=!1,s.isAdmin=!1)},setToken(s,e){s.token=e,s.isAuthenticated=!0},setUsername(s,e){s.username=e},setIsAdmin(s,e){s.isAdmin=e},removeToken(s){s.token=null,s.isAuthenticated=!1,s.username=null,s.isAdmin=!1},setIsLoading(s,e){s.isLoading=e},showLoginRequired(){state.loginRequired=!0}},actions:{},modules:{}});W().defaults.baseURL="http://188.68.223.142/api",(0,a.ri)(Zs).use(cr).use(nr).mount("#app")},6700:function(s,e,t){var a={"./af":1081,"./af.js":1081,"./ar":1488,"./ar-dz":4103,"./ar-dz.js":4103,"./ar-kw":4752,"./ar-kw.js":4752,"./ar-ly":4126,"./ar-ly.js":4126,"./ar-ma":2715,"./ar-ma.js":2715,"./ar-sa":885,"./ar-sa.js":885,"./ar-tn":6763,"./ar-tn.js":6763,"./ar.js":1488,"./az":4093,"./az.js":4093,"./be":1615,"./be.js":1615,"./bg":6965,"./bg.js":6965,"./bm":5851,"./bm.js":5851,"./bn":2913,"./bn-bd":7522,"./bn-bd.js":7522,"./bn.js":2913,"./bo":8599,"./bo.js":8599,"./br":8706,"./br.js":8706,"./bs":2133,"./bs.js":2133,"./ca":4939,"./ca.js":4939,"./cs":9722,"./cs.js":9722,"./cv":7650,"./cv.js":7650,"./cy":428,"./cy.js":428,"./da":4924,"./da.js":4924,"./de":383,"./de-at":4703,"./de-at.js":4703,"./de-ch":7876,"./de-ch.js":7876,"./de.js":383,"./dv":8023,"./dv.js":8023,"./el":4092,"./el.js":4092,"./en-au":2435,"./en-au.js":2435,"./en-ca":7146,"./en-ca.js":7146,"./en-gb":5467,"./en-gb.js":5467,"./en-ie":8393,"./en-ie.js":8393,"./en-il":7321,"./en-il.js":7321,"./en-in":9881,"./en-in.js":9881,"./en-nz":4628,"./en-nz.js":4628,"./en-sg":9502,"./en-sg.js":9502,"./eo":376,"./eo.js":376,"./es":9298,"./es-do":4768,"./es-do.js":4768,"./es-mx":6546,"./es-mx.js":6546,"./es-us":6142,"./es-us.js":6142,"./es.js":9298,"./et":6044,"./et.js":6044,"./eu":7343,"./eu.js":7343,"./fa":6451,"./fa.js":6451,"./fi":6855,"./fi.js":6855,"./fil":4438,"./fil.js":4438,"./fo":9269,"./fo.js":9269,"./fr":5403,"./fr-ca":2441,"./fr-ca.js":2441,"./fr-ch":3222,"./fr-ch.js":3222,"./fr.js":5403,"./fy":328,"./fy.js":328,"./ga":3448,"./ga.js":3448,"./gd":8577,"./gd.js":8577,"./gl":8314,"./gl.js":8314,"./gom-deva":313,"./gom-deva.js":313,"./gom-latn":176,"./gom-latn.js":176,"./gu":9594,"./gu.js":9594,"./he":9589,"./he.js":9589,"./hi":3385,"./hi.js":3385,"./hr":2550,"./hr.js":2550,"./hu":4518,"./hu.js":4518,"./hy-am":8396,"./hy-am.js":8396,"./id":8037,"./id.js":8037,"./is":4770,"./is.js":4770,"./it":1923,"./it-ch":9228,"./it-ch.js":9228,"./it.js":1923,"./ja":3552,"./ja.js":3552,"./jv":159,"./jv.js":159,"./ka":9341,"./ka.js":9341,"./kk":3792,"./kk.js":3792,"./km":6923,"./km.js":6923,"./kn":7099,"./kn.js":7099,"./ko":3196,"./ko.js":3196,"./ku":5389,"./ku.js":5389,"./ky":2626,"./ky.js":2626,"./lb":3124,"./lb.js":3124,"./lo":4732,"./lo.js":4732,"./lt":4702,"./lt.js":4702,"./lv":3832,"./lv.js":3832,"./me":3991,"./me.js":3991,"./mi":2649,"./mi.js":2649,"./mk":3750,"./mk.js":3750,"./ml":3402,"./ml.js":3402,"./mn":3277,"./mn.js":3277,"./mr":5362,"./mr.js":5362,"./ms":624,"./ms-my":8920,"./ms-my.js":8920,"./ms.js":624,"./mt":971,"./mt.js":971,"./my":3713,"./my.js":3713,"./nb":9916,"./nb.js":9916,"./ne":9837,"./ne.js":9837,"./nl":9349,"./nl-be":2144,"./nl-be.js":2144,"./nl.js":9349,"./nn":8,"./nn.js":8,"./oc-lnc":4728,"./oc-lnc.js":4728,"./pa-in":2637,"./pa-in.js":2637,"./pl":5867,"./pl.js":5867,"./pt":6828,"./pt-br":4023,"./pt-br.js":4023,"./pt.js":6828,"./ro":3372,"./ro.js":3372,"./ru":612,"./ru.js":612,"./sd":5917,"./sd.js":5917,"./se":2039,"./se.js":2039,"./si":1778,"./si.js":1778,"./sk":4478,"./sk.js":4478,"./sl":1471,"./sl.js":1471,"./sq":6844,"./sq.js":6844,"./sr":9197,"./sr-cyrl":7475,"./sr-cyrl.js":7475,"./sr.js":9197,"./ss":9543,"./ss.js":9543,"./sv":1704,"./sv.js":1704,"./sw":6447,"./sw.js":6447,"./ta":8067,"./ta.js":8067,"./te":5433,"./te.js":5433,"./tet":4253,"./tet.js":4253,"./tg":1220,"./tg.js":1220,"./th":9532,"./th.js":9532,"./tk":7094,"./tk.js":7094,"./tl-ph":2414,"./tl-ph.js":2414,"./tlh":3066,"./tlh.js":3066,"./tr":5350,"./tr.js":5350,"./tzl":8480,"./tzl.js":8480,"./tzm":5332,"./tzm-latn":2322,"./tzm-latn.js":2322,"./tzm.js":5332,"./ug-cn":3557,"./ug-cn.js":3557,"./uk":5278,"./uk.js":5278,"./ur":3139,"./ur.js":3139,"./uz":5601,"./uz-latn":2716,"./uz-latn.js":2716,"./uz.js":5601,"./vi":5017,"./vi.js":5017,"./x-pseudo":9315,"./x-pseudo.js":9315,"./yo":9628,"./yo.js":9628,"./zh-cn":323,"./zh-cn.js":323,"./zh-hk":1871,"./zh-hk.js":1871,"./zh-mo":7383,"./zh-mo.js":7383,"./zh-tw":8076,"./zh-tw.js":8076};function o(s){var e=i(s);return t(e)}function i(s){if(!t.o(a,s)){var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}return a[s]}o.keys=function(){return Object.keys(a)},o.resolve=i,s.exports=o,o.id=6700}},e={};function t(a){var o=e[a];if(void 0!==o)return o.exports;var i=e[a]={id:a,loaded:!1,exports:{}};return s[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=s,function(){var s=[];t.O=function(e,a,o,i){if(!a){var l=1/0;for(d=0;d<s.length;d++){a=s[d][0],o=s[d][1],i=s[d][2];for(var n=!0,r=0;r<a.length;r++)(!1&i||l>=i)&&Object.keys(t.O).every((function(s){return t.O[s](a[r])}))?a.splice(r--,1):(n=!1,i<l&&(l=i));if(n){s.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=s.length;d>0&&s[d-1][2]>i;d--)s[d]=s[d-1];s[d]=[a,o,i]}}(),function(){t.n=function(s){var e=s&&s.__esModule?function(){return s["default"]}:function(){return s};return t.d(e,{a:e}),e}}(),function(){t.d=function(s,e){for(var a in e)t.o(e,a)&&!t.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:e[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(s){if("object"===typeof window)return window}}()}(),function(){t.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)}}(),function(){t.nmd=function(s){return s.paths=[],s.children||(s.children=[]),s}}(),function(){var s={143:0};t.O.j=function(e){return 0===s[e]};var e=function(e,a){var o,i,l=a[0],n=a[1],r=a[2],c=0;if(l.some((function(e){return 0!==s[e]}))){for(o in n)t.o(n,o)&&(t.m[o]=n[o]);if(r)var d=r(t)}for(e&&e(a);c<l.length;c++)i=l[c],t.o(s,i)&&s[i]&&s[i][0](),s[i]=0;return t.O(d)},a=self["webpackChunkreviews_vue"]=self["webpackChunkreviews_vue"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(3673)}));a=t.O(a)})();
//# sourceMappingURL=app.7293dcb9.js.map